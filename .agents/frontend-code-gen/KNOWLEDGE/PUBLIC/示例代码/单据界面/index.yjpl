<template>
  <page extends="yjpl-template/page/ywdj/index.yjpl" class="single-page">
    <plugins type="remove" target=".bill-aside"></plugins>
    <plugins type="remove" target=".bill-leader"></plugins>
    <plugins type="replace" target=".bill-user">
      <yj-panel class="bill-head-form">
        <div class="bill-user">
          <span class="name">经办人：{{dataModel.billUser.name}}</span>
          <span class="dept">所属部门：{{dataModel.billUser.dept}}</span>
          <font></font>
          <span class="dept">当前操作员：{{dataModel.billUser.operator}}</span>
        </div>
      </yj-panel>
    </plugins>

    <plugins type="append" target=".bill-form">
      <template slot="title">
        <div class="title">
          <div class="title-text">基础信息</div>
          <div class="rule-tips">
            本次调用规则<span class="black-color">3</span>个，其中不通过<span class="red-color">0</span>个，提醒<span class="orange-color">0</span>个，通过<span class="text-primary">3</span>个，人工审核<span class="text-primary">0</span>个
          </div>
        </div>
      </template>
    </plugins>

    <plugins type="append" target=".bill-info">
      <template slot="title">
        <div class="title">
          <div class="title-text">子表信息</div>
          <div class="rule-tips">
            本次调用规则<span class="black-color">3</span>个，其中不通过<span class="red-color">0</span>个，提醒<span class="orange-color">0</span>个，通过<span class="text-primary">3</span>个，人工审核<span class="text-primary">0</span>个
          </div>
        </div>
      </template>
    </plugins>

    <plugins type="append" target=".bill-upload">
      <upload-panel></upload-panel>
    </plugins>

    <plugins type="replace" target=".bill-workflow">
      <yj-panel title="审批轨迹" :collapsible="true">
        <div class="workflow">
          <div class="his-title">
            <span>操作类型</span>
            <span>完成时间</span>
            <span>组织名称</span>
            <span>操作角色</span>
            <span>操作用户</span>
            <span>操作意见</span>
            <span>停留时长</span>
          </div>
          <div class="his-item" v-for="(item,index) in dataModel.workflowData" :key="index">
            <template v-if="item.status === 'none'">
              <span class="none-icon"></span>
            </template>
            <template v-else>
              <span :class="item.status ==='wait' ? 'wait-icon': 'pass-icon'"></span>
              <span>{{item.status ==='wait' ? '待处理':item.status ==='refuse'? '拒绝': '通过'}}</span>
              <span>{{item.finishTime}}</span>
              <span>{{item.organizationName}}</span>
              <span>{{item.rule}}</span>
              <span>{{item.person}}</span>
              <span :class="item.status=='pass' ? 'text-primary' : item.status=='refuse' ? 'red-color' : 'green-color'">{{item.comment}}</span>
              <span>{{item.waitTime}}</span>
            </template>
          </div>
        </div>
      </yj-panel>
    </plugins>
    <!-- 底部区域 -->
    <plugins type="append" target=".bill-footer">
      <div class="tswan-foot">
        报销金额：
        <b>
          ￥
          <span class="price">100.00</span>
        </b>
      </div>
      <div class="tswan-foot">
        支付金额：
        <b>
          ￥
          <span class="price">120.00</span>
        </b>
      </div>
    </plugins>
  </page>
</template>

<script>
  import SingleTemplate from 'yjpl-template/page/ywdj/index.yjpl';
  import SinglePageBs from './single-template';

  export default class SinglePage extends SingleTemplate {
    constructor() {
      super();
      this.yw = new SinglePageBs();
    }
    data() {
      return this.yw.getData();
    }
  }
</script>

<style lang="scss" scoped>
</style>
</template>
