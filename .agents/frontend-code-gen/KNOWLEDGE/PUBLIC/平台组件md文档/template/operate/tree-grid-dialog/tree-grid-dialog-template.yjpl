<template>
  <page extends="yjpl-template/page/operate/tree.yjpl">
    <plugins type="remove" target=".operate-header"></plugins>
    <plugins type="remove" target=".operate-tree-toolbar"></plugins>
    <plugins type="append" target=".query-toolbar">
      <template slot="title">任务列表</template>
    </plugins>
  </page>
</template>

<script lang="ts">
import QueryFormTemplate from 'yjpl-template/page/operate/tree.yjpl';
import treeGridDialogBs from './tree-grid-dialog.ts';

export default class TreeGridExample extends QueryFormTemplate {
  constructor () {
    super();
    this.bs = new treeGridDialogBs();
  }

  data () {
    return {
      ...this.bs.getData(),
      pageModel: {
        title: '操作列表树表样例',
        // 是否查询表格
        isQueryGrid: true,
        // 工具栏
        toolbar: {
          layout: ['title', '->', 'button', 'search']
        },
        // 树区域
        tree: {},
        // 表格区域
        grid: {},
        // 按钮区域
        btns: [],
        // 树按钮区域
        treeBtns: []
      },
      // 用于关联 business 内组件的事件，以组件的 name 为 key
      eventsModel: {}
    };
  }

  async created () {
    // 设置组件至对应 pageModel 区域
    this.$pageModel.set('tree', 'tree');
    this.$pageModel.set('grid', 'grid');
    this.$pageModel.set('btns', ['set', 'print']);
    this.dataModel.grid = await this.bs.getGridData();
    this.dataModel.tree = await this.bs.getTreeData();
  }
}
</script>

<style lang="scss" scoped>
  .operate-form {
    position: relative;
    font-size: 14px;

    span {
      color: #2663ff;
    }
  }

  .operate-btns {
    margin-right: 20px;
  }

  .operate-slot {
    position: absolute;
    top: 16px;
    right: 16px;
  }
</style>